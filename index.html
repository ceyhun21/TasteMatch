<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TasteMatch - Restaurant Discovery</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 40px 20px;
            border-radius: 16px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .card h2 {
            margin-bottom: 20px;
            color: #ef4444;
            font-size: 1.5em;
        }

        /* Allergie Filter */
        .allergy-filter {
            margin-bottom: 20px;
        }

        .allergy-group {
            margin-bottom: 15px;
        }

        .allergy-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .allergy-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 8px;
        }

        .allergy-btn {
            padding: 10px 15px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .allergy-btn:hover {
            border-color: #ef4444;
            background: #ffe5e5;
        }

        .allergy-btn.active {
            background: #ef4444;
            color: white;
            border-color: #ef4444;
        }

        /* Swipe Card */
        .swipe-container {
            perspective: 1000px;
        }

        .restaurant-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            height: 450px;
            position: relative;
            cursor: grab;
            user-select: none;
            transition: transform 0.1s ease, box-shadow 0.1s ease;
        }

        .restaurant-card:active {
            cursor: grabbing;
        }

        .restaurant-card.dragging {
            transform: scale(0.95);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        .restaurant-image {
            width: 100%;
            height: 60%;
            object-fit: cover;
            background: #f0f0f0;
        }

        .restaurant-info {
            padding: 20px;
            height: 40%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .restaurant-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 10px;
        }

        .restaurant-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
        }

        .restaurant-rating {
            background: #fbbf24;
            color: #333;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .restaurant-details {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }

        .verified-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: #10b981;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: 600;
            margin-bottom: 8px;
        }

        /* Swipe buttons */
        .swipe-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-dislike {
            background: #f3f4f6;
            color: #666;
        }

        .btn-dislike:hover {
            background: #ef4444;
            color: white;
            transform: scale(1.05);
        }

        .btn-like {
            background: #ef4444;
            color: white;
        }

        .btn-like:hover {
            background: #dc2626;
            transform: scale(1.05);
        }

        /* Liked Restaurants List */
        .liked-restaurants {
            max-height: 600px;
            overflow-y: auto;
        }

        .liked-item {
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            gap: 15px;
            align-items: center;
            border-left: 4px solid #ef4444;
        }

        .liked-item-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
        }

        .liked-item-info {
            flex: 1;
        }

        .liked-item-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .liked-item-rating {
            font-size: 0.85em;
            color: #666;
        }

        .btn-remove {
            background: #fee2e2;
            color: #dc2626;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 600;
        }

        .btn-remove:hover {
            background: #ef4444;
            color: white;
        }

        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #ef4444;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            color: #666;
        }

        /* Reviews Section */
        .reviews-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .review-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-left: 4px solid #fbbf24;
        }

        .review-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .review-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #666;
        }

        .review-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .stars {
            color: #fbbf24;
            font-size: 0.9em;
        }

        .review-text {
            color: #555;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .allergen-info {
            background: #fef3c7;
            padding: 10px;
            border-radius: 6px;
            font-size: 0.85em;
            color: #92400e;
            margin-top: 10px;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #999;
        }

        .empty-state-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .loading.active {
            display: block;
        }

        .distance-info {
            background: #e0f2fe;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            color: #0369a1;
            margin-top: 8px;
        }

        .allergen-warning {
            background: #fee2e2;
            border: 1px solid #fca5a5;
            padding: 12px;
            border-radius: 8px;
            margin-top: 12px;
            font-size: 0.9em;
            color: #7f1d1d;
        }

        .allergen-warning strong {
            display: block;
            margin-bottom: 5px;
        }

        h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .no-restaurants {
            text-align: center;
            padding: 30px;
            color: #999;
        }

        .distance-slider {
            width: 100%;
            margin: 10px 0;
        }

        .slider-value {
            font-weight: 600;
            color: #ef4444;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚ù§Ô∏è TasteMatch</h1>
            <p>Finde dein perfektes Restaurant mit Allergie-Filter & echten Bewertungen</p>
            <div style="margin-top: 15px; font-size: 0.9em;">
                ‚úÖ Keine Anmeldung n√∂tig - direkt starten!
            </div>
        </header>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalRestaurants">12</div>
                <div class="stat-label">Restaurants</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalLikes">0</div>
                <div class="stat-label">Favoriten</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalReviews">0</div>
                <div class="stat-label">Bewertungen</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="distanceInfo">5 km</div>
                <div class="stat-label">Umkreis</div>
            </div>
        </div>

        <div class="main-content">
            <!-- Left: Filter & Swipe -->
            <div>
                <!-- Filter Card -->
                <div class="card">
                    <h2>üîç Allergie-Filter</h2>
                    <div class="allergy-filter">
                        <div class="allergy-group">
                            <label>Deine Allergien:</label>
                            <div class="allergy-options" id="allergyOptions"></div>
                        </div>
                        <div class="allergy-group">
                            <label>Maximale Entfernung: <span class="slider-value" id="distanceValue">5 km</span></label>
                            <input type="range" id="distanceSlider" class="distance-slider" min="1" max="50" value="5">
                        </div>
                        <div class="allergy-group">
                            <label>
                                <input type="checkbox" id="verifiedOnly" checked>
                                Nur verifizierte Restaurants
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Swipe Card -->
                <div class="card" style="margin-top: 20px;">
                    <h2>üí¨ Swipe & Entdecke</h2>
                    <div class="swipe-container">
                        <div class="restaurant-card" id="restaurantCard">
                            <img class="restaurant-image" id="restaurantImage" src="" alt="Restaurant">
                            <div class="restaurant-info">
                                <div>
                                    <div class="verified-badge" id="verifiedBadge" style="display: none;">
                                        ‚úì Verifiziert
                                    </div>
                                    <div class="restaurant-header">
                                        <div>
                                            <div class="restaurant-name" id="restaurantName">Restaurant</div>
                                            <div class="restaurant-details" id="restaurantCuisine">K√ºche</div>
                                        </div>
                                        <div class="restaurant-rating" id="restaurantRating">4.5 ‚≠ê</div>
                                    </div>
                                    <div class="distance-info" id="distanceInfo">üìç 2.5 km entfernt</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="swipe-buttons">
                        <button class="btn btn-dislike" onclick="dislikeRestaurant()">‚úï Nicht interessiert</button>
                        <button class="btn btn-like" onclick="likeRestaurant()">‚ù§Ô∏è Like!</button>
                    </div>

                    <div id="noRestaurants" class="empty-state" style="display: none; margin-top: 30px;">
                        <div class="empty-state-icon">üéâ</div>
                        <p>Alle Restaurants durchgesehen!</p>
                        <button class="btn btn-like" onclick="resetSwipe()" style="margin-top: 15px; width: 100%;">
                            Neu laden
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right: Liked Restaurants & Reviews -->
            <div>
                <!-- Liked Restaurants -->
                <div class="card">
                    <h2>‚ù§Ô∏è Deine Favoriten (<span id="likedCount">0</span>)</h2>
                    <div class="liked-restaurants" id="likedRestaurants">
                        <div class="empty-state">
                            <p>Noch keine Favoriten. Beginne zu swipen! üëÜ</p>
                        </div>
                    </div>
                </div>

                <!-- Popular Reviews -->
                <div class="card" style="margin-top: 20px;">
                    <h2>‚≠ê Top Bewertungen</h2>
                    <div id="reviewsContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Allergen List
        const ALLERGENS = [
            'Gluten', 'Milch', 'Eier', 'Fisch',
            'Meeresfr√ºchte', 'Nussfr√ºchte', 'Erdn√ºsse', 'Sesam',
            'Soja', 'Senf', 'Sellerie', 'Sulfite'
        ];

        // Mock Restaurant Data
        const restaurants = [
            {
                id: 1,
                name: 'Bella Italia',
                image: 'https://via.placeholder.com/400x300?text=Bella+Italia',
                cuisine: 'Italienisch',
                rating: 4.8,
                reviews: 142,
                distance: 1.2,
                verified: true,
                allergens: { 0: true, 1: false, 2: true }, // Gluten, Eier
                description: 'Authentische italienische K√ºche'
            },
            {
                id: 2,
                name: 'Sushi Paradise',
                image: 'https://via.placeholder.com/400x300?text=Sushi+Paradise',
                cuisine: 'Japanisch',
                rating: 4.6,
                reviews: 98,
                distance: 2.1,
                verified: true,
                allergens: { 3: true, 4: true }, // Fisch, Meeresfr√ºchte
                description: 'Frische Sushi & Sashimi t√§glich'
            },
            {
                id: 3,
                name: 'Curry House',
                image: 'https://via.placeholder.com/400x300?text=Curry+House',
                cuisine: 'Indisch',
                rating: 4.4,
                reviews: 67,
                distance: 3.5,
                verified: true,
                allergens: { 1: false, 6: true }, // Erdn√ºsse
                description: 'Authentische Currys & Naan'
            },
            {
                id: 4,
                name: 'Green Garden',
                image: 'https://via.placeholder.com/400x300?text=Green+Garden',
                cuisine: 'Vegetarisch',
                rating: 4.7,
                reviews: 156,
                distance: 0.8,
                verified: true,
                allergens: {},
                description: '100% vegetarische & vegane Gerichte'
            },
            {
                id: 5,
                name: 'Burger King Alternative',
                image: 'https://via.placeholder.com/400x300?text=Burgers',
                cuisine: 'American',
                rating: 4.2,
                reviews: 89,
                distance: 1.5,
                verified: false,
                allergens: { 0: true, 1: true, 6: true },
                description: 'Gourmet Burger & Fries'
            },
            {
                id: 6,
                name: 'Pho Vietnam',
                image: 'https://via.placeholder.com/400x300?text=Pho+Vietnam',
                cuisine: 'Vietnamesisch',
                rating: 4.5,
                reviews: 112,
                distance: 2.8,
                verified: true,
                allergens: { 3: true, 10: true }, // Fisch, Sellerie
                description: 'Traditionelle Pho & Banh Mi'
            },
            {
                id: 7,
                name: 'Steakhouse Premium',
                image: 'https://via.placeholder.com/400x300?text=Steakhouse',
                cuisine: 'Steaks',
                rating: 4.9,
                reviews: 234,
                distance: 4.2,
                verified: true,
                allergens: {},
                description: 'Premium Steaks & Weine'
            },
            {
                id: 8,
                name: 'Taco Fiesta',
                image: 'https://via.placeholder.com/400x300?text=Taco+Fiesta',
                cuisine: 'Mexikanisch',
                rating: 4.3,
                reviews: 145,
                distance: 1.9,
                verified: true,
                allergens: { 1: false, 6: true },
                description: 'Authentische mexikanische Tacos'
            },
            {
                id: 9,
                name: 'Pizza Paradise',
                image: 'https://via.placeholder.com/400x300?text=Pizza+Paradise',
                cuisine: 'Italienisch',
                rating: 4.4,
                reviews: 203,
                distance: 2.3,
                verified: true,
                allergens: { 0: true, 1: true },
                description: 'Handgemachte neapolitanische Pizzas'
            },
            {
                id: 10,
                name: 'Wok Express',
                image: 'https://via.placeholder.com/400x300?text=Wok+Express',
                cuisine: 'Chinesisch',
                rating: 4.1,
                reviews: 76,
                distance: 3.8,
                verified: false,
                allergens: { 8: true, 3: true },
                description: 'Schnelle & leckere Wok-Gerichte'
            },
            {
                id: 11,
                name: 'Falafel Corner',
                image: 'https://via.placeholder.com/400x300?text=Falafel',
                cuisine: 'Orientalisch',
                rating: 4.6,
                reviews: 91,
                distance: 2.6,
                verified: true,
                allergens: { 6: true },
                description: 'Frische arabische Spezialit√§ten'
            },
            {
                id: 12,
                name: 'Thai Orchid',
                image: 'https://via.placeholder.com/400x300?text=Thai+Orchid',
                cuisine: 'Thail√§ndisch',
                rating: 4.7,
                reviews: 178,
                distance: 3.2,
                verified: true,
                allergens: { 3: true, 8: true },
                description: 'Authentische Thai Curries'
            }
        ];

        // Mock Reviews
        const mockReviews = [
            {
                id: 1,
                restaurant: 'Green Garden',
                author: 'Anna M.',
                rating: 5,
                text: 'Absolut fantastisch! Alles ist vegan und schmeckt herrlich.',
                allergen: '‚úÖ Vollst√§ndig glutenfrei!'
            },
            {
                id: 2,
                restaurant: 'Steakhouse Premium',
                author: 'Max B.',
                rating: 5,
                text: 'Das beste Steak, das ich je gegessen habe. Sehr zu empfehlen!',
                allergen: '‚úÖ Keine versteckten Allergene'
            },
            {
                id: 3,
                restaurant: 'Thai Orchid',
                author: 'Sarah L.',
                rating: 4,
                text: 'Gro√üartige Curries! Das Mango Curry war mein Favorit.',
                allergen: '‚ö†Ô∏è Enth√§lt Fisch-Sauce'
            }
        ];

        // State
        let selectedAllergies = [];
        let likedRestaurants = [];
        let currentIndex = 0;
        let maxDistance = 5;
        let verifiedOnly = true;
        let filteredRestaurants = [...restaurants];

        // Initialize
        function init() {
            renderAllergyButtons();
            updateRestaurantDisplay();
            renderReviews();
            setupEventListeners();
        }

        function renderAllergyButtons() {
            const container = document.getElementById('allergyOptions');
            container.innerHTML = ALLERGENS.map((allergy, index) => `
                <button class="allergy-btn" onclick="toggleAllergy(${index})">
                    ${allergy}
                </button>
            `).join('');
        }

        function toggleAllergy(index) {
            const allergen = ALLERGENS[index];
            if (selectedAllergies.includes(allergen)) {
                selectedAllergies = selectedAllergies.filter(a => a !== allergen);
            } else {
                selectedAllergies.push(allergen);
            }
            
            // Update button styles
            document.querySelectorAll('.allergy-btn').forEach((btn, i) => {
                if (i === index) {
                    btn.classList.toggle('active');
                }
            });

            filterRestaurants();
        }

        function filterRestaurants() {
            filteredRestaurants = restaurants.filter(restaurant => {
                // Check distance
                if (restaurant.distance > maxDistance) return false;
                
                // Check verification
                if (verifiedOnly && !restaurant.verified) return false;
                
                // Check allergens
                for (let i = 0; i < ALLERGENS.length; i++) {
                    if (selectedAllergies.includes(ALLERGENS[i]) && restaurant.allergens[i]) {
                        return false;
                    }
                }
                
                return true;
            });

            currentIndex = 0;
            updateRestaurantDisplay();
        }

        function updateRestaurantDisplay() {
            if (currentIndex >= filteredRestaurants.length) {
                document.getElementById('restaurantCard').style.display = 'none';
                document.getElementById('noRestaurants').style.display = 'block';
                return;
            }

            document.getElementById('restaurantCard').style.display = 'block';
            document.getElementById('noRestaurants').style.display = 'none';

            const restaurant = filteredRestaurants[currentIndex];
            
            document.getElementById('restaurantImage').src = restaurant.image;
            document.getElementById('restaurantName').textContent = restaurant.name;
            document.getElementById('restaurantCuisine').textContent = restaurant.cuisine;
            document.getElementById('restaurantRating').textContent = restaurant.rating + ' ‚≠ê';
            document.getElementById('distanceInfo').textContent = `üìç ${restaurant.distance} km entfernt`;
            
            const verifiedBadge = document.getElementById('verifiedBadge');
            if (restaurant.verified) {
                verifiedBadge.style.display = 'inline-flex';
            } else {
                verifiedBadge.style.display = 'none';
            }

            // Show allergen warnings
            const allergenWarning = document.querySelector('.allergen-warning');
            if (allergenWarning) allergenWarning.remove();

            const hasAllergens = Object.values(restaurant.allergens).some(v => v);
            if (hasAllergens) {
                const warning = document.createElement('div');
                warning.className = 'allergen-warning';
                warning.innerHTML = '<strong>‚ö†Ô∏è Allergen-Warnung</strong>' +
                    Object.entries(restaurant.allergens)
                        .filter(([_, v]) => v)
                        .map(([idx]) => ALLERGENS[idx])
                        .join(', ');
                document.querySelector('.restaurant-info').appendChild(warning);
            }
        }

        function likeRestaurant() {
            const restaurant = filteredRestaurants[currentIndex];
            if (!likedRestaurants.find(r => r.id === restaurant.id)) {
                likedRestaurants.push(restaurant);
                updateLikedList();
            }
            nextRestaurant();
        }

        function dislikeRestaurant() {
            nextRestaurant();
        }

        function nextRestaurant() {
            currentIndex++;
            updateRestaurantDisplay();
        }

        function removeLike(restaurantId) {
            likedRestaurants = likedRestaurants.filter(r => r.id !== restaurantId);
            updateLikedList();
        }

        function updateLikedList() {
            const container = document.getElementById('likedRestaurants');
            document.getElementById('likedCount').textContent = likedRestaurants.length;
            document.getElementById('totalLikes').textContent = likedRestaurants.length;

            if (likedRestaurants.length === 0) {
                container.innerHTML = '<div class="empty-state"><p>Noch keine Favoriten. Beginne zu swipen! üëÜ</p></div>';
                return;
            }

            container.innerHTML = likedRestaurants.map(restaurant => `
                <div class="liked-item">
                    <img src="${restaurant.image}" alt="${restaurant.name}" class="liked-item-image">
                    <div class="liked-item-info">
                        <div class="liked-item-name">${restaurant.name}</div>
                        <div class="liked-item-rating">‚≠ê ${restaurant.rating} (${restaurant.reviews})</div>
                    </div>
                    <button class="btn-remove" onclick="removeLike(${restaurant.id})">Entfernen</button>
                </div>
            `).join('');
        }

        function resetSwipe() {
            currentIndex = 0;
            updateRestaurantDisplay();
        }

        function renderReviews() {
            const container = document.getElementById('reviewsContainer');
            document.getElementById('totalReviews').textContent = mockReviews.length;
            
            container.innerHTML = mockReviews.map(review => `
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-avatar">${review.author.charAt(0)}</div>
                        <div>
                            <div class="review-name">${review.author}</div>
                            <div class="stars">${'‚≠ê'.repeat(review.rating)}</div>
                        </div>
                    </div>
                    <div class="review-text">${review.text}</div>
                    <div class="allergen-info">${review.allergen}</div>
                </div>
            `).join('');
        }

        function setupEventListeners() {
            document.getElementById('distanceSlider').addEventListener('input', (e) => {
                maxDistance = parseInt(e.target.value);
                document.getElementById('distanceValue').textContent = maxDistance + ' km';
                document.getElementById('distanceInfo').textContent = maxDistance + ' km';
                filterRestaurants();
            });

            document.getElementById('verifiedOnly').addEventListener('change', (e) => {
                verifiedOnly = e.target.checked;
                filterRestaurants();
            });
        }

        // Start the app
        init();
    </script>
</body>
</html>
